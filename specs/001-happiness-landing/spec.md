# Feature Specification: Happiness Landing Page

**Feature Branch**: `001-happiness-landing`
**Created**: 2025-12-09
**Status**: Draft
**Input**: Premium landing page for personal transformation coaching program "Happiness" with WOW-effect animations, contact form to Telegram, and Cal.com booking integration

---

## User Scenarios & Testing

### User Story 1 - First Impression & Emotional Hook (Priority: P1)

Посетитель попадает на лендинг и с первой секунды погружается в атмосферу премиального опыта через анимированный прелоадер и эмоциональный Hero-экран.

**Why this priority**: Первое впечатление критично для удержания целевой аудитории (успешные предприниматели 35-50 лет). Если посетитель не получит WOW-эффект в первые секунды, он уйдет. Это единственный шанс зацепить внимание.

**Independent Test**: Можно протестировать независимо, открыв сайт и оценив время загрузки, плавность анимаций прелоадера и визуальный импакт Hero-секции. Посетитель должен почувствовать "это что-то особенное".

**Acceptance Scenarios**:

1. **Given** посетитель впервые открывает сайт, **When** страница загружается, **Then** он видит анимированный прелоадер с brush stroke и морфингом текста длительностью 2.5-3 секунды
2. **Given** прелоадер завершился, **When** контент появляется, **Then** посетитель видит Hero-секцию с манифестом, фото автора и CTA-кнопкой с плавными анимациями появления
3. **Given** посетитель находится на Hero-секции на десктопе, **When** он двигает мышью или скроллит, **Then** элементы реагируют параллакс-эффектом создавая ощущение глубины

---

### User Story 2 - Understanding the Program Value (Priority: P2)

Посетитель скроллит страницу и узнает философию программы, историю трансформации автора и ключевые сигналы проблем через интерактивные секции.

**Why this priority**: После первичного интереса посетитель должен понять ценность программы и увидеть себя в описанных проблемах. Без этого понимания он не перейдет к действию.

**Independent Test**: Можно протестировать, проскроллив от Hero до диагностической секции и проверив, что каждая секция раскрывается с анимациями и доносит свое сообщение.

**Acceptance Scenarios**:

1. **Given** посетитель скроллит к секции "Философия", **When** карточки появляются в viewport, **Then** они анимированно появляются с stagger-эффектом и реагируют на hover (desktop) или tap (mobile)
2. **Given** посетитель достигает секции "Трансформация", **When** он продолжает скролл, **Then** секция "прикрепляется" и показывает переход "Было → Стало" с blur/focus эффектами
3. **Given** посетитель находится в секции "Диагностика", **When** он взаимодействует с toggles/sliders, **Then** активные элементы подсвечиваются маркерным эффектом (данные не собираются)

---

### User Story 3 - Program Roadmap Exploration (Priority: P3)

Посетитель изучает конкретный план трансформации по неделям в интерактивном roadmap.

**Why this priority**: Понимание конкретных шагов программы укрепляет доверие и снижает неопределенность. Однако это дополнительная информация — основное решение принимается на предыдущих этапах.

**Independent Test**: Можно протестировать, проскроллив к секции Roadmap и проверив горизонтальный таймлайн (desktop) или вертикальный стек (mobile) с прогресс-индикатором.

**Acceptance Scenarios**:

1. **Given** посетитель на десктопе достигает секции Roadmap, **When** он скроллит, **Then** видит горизонтальный таймлайн с pinning-эффектом и прогресс-баром, заполняющимся при скролле
2. **Given** посетитель на мобильном устройстве, **When** он достигает Roadmap, **Then** видит вертикальный стек этапов с fade-in анимациями (без горизонтального скролла)
3. **Given** посетитель хочет напрямую перейти к этапу, **When** он кликает/тапает на элемент таймлайна, **Then** происходит плавный переход к выбранному этапу

---

### User Story 4 - Contact Form Submission (Priority: P1)

Посетитель заполняет форму заявки, которая отправляется автору в Telegram.

**Why this priority**: Это основная конверсионная цель лендинга. Без работающей формы весь сайт бесполезен. Равен по важности с первым впечатлением.

**Independent Test**: Можно протестировать независимо, заполнив форму с валидными данными и проверив получение сообщения в Telegram.

**Acceptance Scenarios**:

1. **Given** посетитель заполнил форму (имя, контакт, опционально о ситуации), **When** он нажимает "Записаться на знакомство", **Then** форма отправляется, показывается loading state, затем success message
2. **Given** форма отправлена успешно, **When** посетитель видит success state, **Then** ему предлагается кнопка "Выбрать время встречи" для перехода в Cal.com
3. **Given** произошла ошибка отправки, **When** посетитель видит error state, **Then** показывается сообщение с retry-кнопкой и fallback-ссылкой на Telegram автора
4. **Given** бот пытается спамить форму, **When** заполнено honeypot поле или превышен rate limit (3 запроса/минуту), **Then** запрос блокируется без уведомления бота

---

### User Story 5 - Booking Consultation via Cal.com (Priority: P2)

Посетитель переходит в Cal.com для бронирования конкретного времени консультации.

**Why this priority**: Упрощает процесс записи и снижает friction. Однако форма заявки уже дает контакт — Cal.com это дополнительное удобство.

**Independent Test**: Можно протестировать переходом по ссылке Cal.com и проверкой доступности слотов бронирования.

**Acceptance Scenarios**:

1. **Given** посетитель нажимает CTA "Выбрать время встречи", **When** открывается Cal.com, **Then** он видит календарь с доступными слотами для события "Знакомство"
2. **Given** посетитель на success state формы, **When** он нажимает кнопку бронирования, **Then** происходит редирект на Cal.com (не embed, для надежности)

---

### User Story 6 - Mobile Experience (Priority: P1)

Посетитель открывает сайт на мобильном устройстве и получает полноценный адаптированный опыт.

**Why this priority**: Значительная часть целевой аудитории (занятые предприниматели) впервые увидят сайт на телефоне. Некачественный мобильный опыт = потерянные клиенты.

**Independent Test**: Можно протестировать на реальных устройствах (iPhone, Android) и в DevTools, проверив все секции и интерактивные элементы.

**Acceptance Scenarios**:

1. **Given** посетитель открывает сайт на мобильном, **When** прелоадер и Hero загружаются, **Then** анимации адаптированы (уменьшенный parallax, без mouse-move эффектов)
2. **Given** посетитель скроллит на мобильном, **When** достигает Roadmap секции, **Then** видит вертикальный стек (не горизонтальный scroll, который конфликтует с жестами браузера)
3. **Given** посетитель взаимодействует с формой на мобильном, **When** он тапает по полям и кнопкам, **Then** touch targets не менее 44px, клавиатура не перекрывает активное поле

---

### Edge Cases

- Что происходит при медленном интернете? Прелоадер показывается максимум 5 секунд, затем контент появляется независимо от загрузки ресурсов
- Что если Telegram API недоступен? Показывается fallback-сообщение со ссылкой на Telegram автора напрямую
- Что если посетитель включил prefers-reduced-motion? Все анимации отключаются или минимизируются согласно системным настройкам
- Что если посетитель использует Safari iOS в Low Power Mode? CPU throttled — анимации должны оставаться плавными за счет упрощения
- Что если Cal.com недоступен? Кнопка бронирования ведет на ссылку, пользователь увидит страницу Cal.com (не встроенный виджет)
- Что если JavaScript отключен? Базовый контент (текст, изображения) должен быть доступен без JS

---

## Requirements

### Functional Requirements

#### Прелоадер и загрузка
- **FR-001**: Система ДОЛЖНА показывать анимированный прелоадер при первой загрузке с brush stroke SVG-анимацией и морфингом текста ("КОНТРОЛЬ" → "ТРАНСФОРМАЦИЯ" → "СВОБОДА")
- **FR-002**: Прелоадер ДОЛЖЕН длиться минимум 2.5 секунды и максимум 5 секунд (Resource-Gated с timeout)
- **FR-003**: Система ДОЛЖНА блокировать scroll во время прелоадера и разблокировать после его завершения

#### Hero секция
- **FR-004**: Hero секция ДОЛЖНА отображать надзаголовок, заголовок-манифест, текст манифеста, CTA-кнопку и handwritten подпись
- **FR-005**: Hero секция ДОЛЖНА включать фото автора с parallax-эффектом на scroll
- **FR-006**: CTA-кнопка ДОЛЖНА плавно прокручивать к секции контактной формы

#### Философия (4 карточки)
- **FR-007**: Секция ДОЛЖНА отображать 4 карточки (Компас, Защита, Контроль, Забота) с иконками и описаниями
- **FR-008**: Карточки ДОЛЖНЫ появляться с stagger-анимацией при scroll и реагировать на hover (desktop) или tap (mobile)

#### Трансформация
- **FR-009**: Секция ДОЛЖНА отображать таблицу "Было → Стало" с pinned scroll анимацией
- **FR-010**: При scroll "Было" колонка ДОЛЖНА blur/fade, "Стало" колонка ДОЛЖНА подсвечиваться золотым градиентом

#### Диагностика
- **FR-011**: Секция ДОЛЖНА отображать 5 интерактивных сигналов с toggle/slider элементами
- **FR-012**: Система НЕ ДОЛЖНА собирать данные из диагностической секции (только визуальная обратная связь)

#### Roadmap
- **FR-013**: На desktop секция ДОЛЖНА показывать горизонтальный timeline с pinning и progress bar
- **FR-014**: На mobile секция ДОЛЖНА показывать вертикальный стек этапов без горизонтального scroll

#### Контактная форма
- **FR-015**: Форма ДОЛЖНА содержать поля: Имя (обязательное), Контакт (обязательное), О ситуации (опциональное, макс 1000 символов)
- **FR-016**: Форма ДОЛЖНА отправлять данные в Telegram через Bot API
- **FR-017**: Форма ДОЛЖНА показывать состояния: default, loading, success, error
- **FR-018**: Форма ДОЛЖНА включать honeypot-поле для защиты от ботов
- **FR-019**: Система ДОЛЖНА применять rate limiting (максимум 3 заявки в минуту с одного IP)

#### Cal.com интеграция
- **FR-020**: Система ДОЛЖНА предоставлять кнопку перехода на Cal.com после успешной отправки формы
- **FR-021**: Интеграция ДОЛЖНА быть реализована как redirect (не embed) для надежности

#### Навигация и UI
- **FR-022**: После scroll за Hero секцию ДОЛЖЕН появляться минимальный header с логотипом и CTA-кнопкой
- **FR-023**: Система ДОЛЖНА предоставлять scroll indicator на Hero секции с bounce-анимацией
- **FR-024**: Система ДОЛЖНА показывать "Back to top" кнопку после scroll 50vh

#### Footer
- **FR-025**: Footer ДОЛЖЕН содержать копирайт, ссылку на политику конфиденциальности и контактный Telegram

#### Доступность
- **FR-026**: Система ДОЛЖНА уважать настройку prefers-reduced-motion
- **FR-027**: Все интерактивные элементы ДОЛЖНЫ иметь touch targets минимум 44px
- **FR-028**: Цветовой контраст текста ДОЛЖЕН соответствовать WCAG AA (4.5:1)
- **FR-029**: Страница ДОЛЖНА иметь правильную иерархию заголовков (один h1, затем h2, h3)

#### Производительность
- **FR-030**: LCP ДОЛЖЕН быть менее 2.5 секунд
- **FR-030a**: INP ДОЛЖЕН быть менее 200ms (заменяет устаревший FID в Core Web Vitals 2024)
- **FR-031**: CLS ДОЛЖЕН быть менее 0.1
- **FR-032**: Lighthouse Performance score ДОЛЖЕН быть выше 90

#### SEO и Legal
- **FR-033**: Страница ДОЛЖНА иметь корректные meta-теги, OG-теги для social sharing
- **FR-034**: Система ДОЛЖНА предоставлять страницу политики конфиденциальности (/privacy)

### Key Entities

- **Lead (Заявка)**: Данные из контактной формы — имя, контакт (телефон/telegram), сообщение о ситуации, timestamp. Хранится в Telegram (не в БД).
- **Section (Секция)**: Логический блок контента — Preloader, Hero, Philosophy, Transformation, Diagnostic, Roadmap, Contact, Footer
- **Card (Карточка)**: Элемент секции Philosophy — название, иконка, описание, анимационные состояния
- **Signal (Сигнал)**: Элемент секции Diagnostic — название, описание, toggle state (не сохраняется)
- **Stage (Этап)**: Элемент секции Roadmap — номер недели, название, фокус, действия, результат

---

## Success Criteria

### Measurable Outcomes

- **SC-001**: Посетители удерживаются на сайте более 30 секунд в 70% случаев (измеряется через аналитику после запуска)
- **SC-002**: Время от открытия сайта до интерактивности менее 3 секунд на среднем 4G соединении
- **SC-003**: Форма заявки заполняется и отправляется менее чем за 2 минуты
- **SC-004**: Сайт корректно отображается на всех целевых устройствах (iPhone Pro, Android mid-range 2020+, desktop современные браузеры)
- **SC-005**: Lighthouse Performance score выше 90 на desktop и выше 80 на mobile
- **SC-006**: 100% заявок успешно доставляются в Telegram при работающем интернете
- **SC-007**: Сайт остается функциональным (базовый контент доступен) даже при отключенном JavaScript
- **SC-008**: Все анимации работают плавно (60fps) на целевых устройствах, включая iOS в Low Power Mode

---

## Assumptions

1. **Контент Roadmap**: Контент программы по неделям будет предоставлен заказчиком. В случае отсутствия секция будет использовать placeholder контент
2. **Фото автора**: Профессиональное фото будет предоставлено. До получения используется placeholder
3. **Telegram Bot**: Токен и chat_id будут предоставлены заказчиком
4. **Cal.com**: Аккаунт настроен с событием "Знакомство" и подключенным календарем
5. **Header вариант**: Используется минимальный header (появляется после Hero) — рекомендованный вариант из ТЗ
6. **Footer вариант**: Минимальный footer с копирайтом и privacy link
7. **Иконки**: Используются Lucide Icons (готовые, MIT license)
8. **Cal.com интеграция**: Redirect вместо embed для простоты и надежности
9. **Brush stroke изображения**: Будут сгенерированы по промптам из ТЗ или созданы как inline SVG
10. **Cal.com Free Tier**: Бесплатный тариф Cal.com достаточен для MVP (до 100 бронирований/месяц). При превышении потребуется апгрейд или self-hosted версия
11. **Контент из ТЗ**: Все тексты (манифест, описания секций, "Что будет на встрече") берутся из ТЗ Section 17 (строки 1104-1136)

---

## Out of Scope

- Аналитика (Yandex Metrica, Google Analytics) — может быть добавлена позже
- Многоязычность — только русский язык
- CMS или админ-панель — статический контент
- База данных — данные идут напрямую в Telegram
- A/B тестирование — не в MVP
- Блог или дополнительные страницы — только лендинг и /privacy
